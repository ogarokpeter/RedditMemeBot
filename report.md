# Отчёт

Мой бот построен аналогично боту из туторала (https://www.twilio.com/blog/2017/12/facebook-messenger-bot-python.html). Для работы с Reddit Web API используется Python Reddit API Wrapper (https://praw.readthedocs.io), для баботы с базой данных Redis - официальный питоновский клиент (https://github.com/andymccurdy/redis-py).

Бот умеет показывать заданное количество постов (картинки он рендерит прямо в мессенджере, для прочих постов он отдаёт ссылки на них) с заданного канала; реализует подписку (хранит информацию о последних просмотренных мемах в каналах, на которые подписан пользователь, в Redis и может по заказу показывать новые мемы из этих каналов (новыми считаются те, которые пользователь не смотрел в прошлый раз)б а также позволяет подписываться на новые каналы и отписываться от старых).

Бот лежит на убунтовской виртуальной машине на Яндекс.Облаке: там запущен сам бот, Redis и localtunnel, по которому бот общается с Фейсбуком. Все зависимости бота собраны в файл requirements.txt.

Интерфейс бота - хардкорный CLI, команды вводятся, как будто это консольное приложение в Linux, и парсятся питоновским argparse'ом. Это круто выглядит и позволяет очень сильно упростить интерфейс бота. Естественно, поддержана обработка ошибочных команд - бот не падает и не виснет, а сообщает пользователю, что команда ошибочна. Для такого поведения пришлось переопределить класс исключений модуля argparse, потому что по дефолту argparse просто падал в случае, если агрументы были неправильны, и бот зависал.

Бот реализует логирование своих действий.

В соответствии с философией Flask, весь код бота размещён в одном файле app.py. Отдельно хранятся ключи доступа к Reddit Web API и Facebook Messenger API.
